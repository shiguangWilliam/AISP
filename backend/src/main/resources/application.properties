spring.application.name=aisp-backend
server.port=3335

# --- MySQL ---
# Defaults match backend/docker/mysql/docker-compose.yml
spring.datasource.url=jdbc:mysql://${MYSQL_HOST:127.0.0.1}:${MYSQL_PORT:3306}/${MYSQL_DB:medisage}?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC&characterEncoding=utf8&useUnicode=true
spring.datasource.username=${MYSQL_USER:root}
spring.datasource.password=${MYSQL_PASSWORD:root123456}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Keep startup fast/safe for now (no automatic schema changes)
spring.sql.init.mode=never

# --- SMTP (163) ---
# 163 邮箱需要开启 SMTP 并使用“客户端授权码”作为密码。
spring.mail.host=${SMTP_HOST:smtp.163.com}
spring.mail.port=${SMTP_PORT:465}
spring.mail.username=${SMTP_USERNAME:aisp_no_reply@163.com}
spring.mail.password=${SMTP_PASSWORD:LWr7JWD7YANaeeDn}
#这里是授权码，先使用默认值，部署时再修改


spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.ssl.enable=${SMTP_SSL_ENABLE:true}
spring.mail.properties.mail.smtp.starttls.enable=${SMTP_STARTTLS_ENABLE:false}
spring.mail.properties.mail.smtp.starttls.required=${SMTP_STARTTLS_REQUIRED:false}
spring.mail.properties.mail.smtp.ssl.trust=${SMTP_SSL_TRUST:smtp.163.com}

# 应用层发件人
app.mail.from=${MAIL_FROM:aisp_no_reply@163.com}
app.mail.fromName=${MAIL_FROM_NAME:AISP}

# 验证码
app.verify.code.ttlSeconds=${VERIFY_CODE_TTL_SECONDS:900}
app.verify.code.minResendSeconds=${VERIFY_CODE_MIN_RESEND_SECONDS:60}
app.verify.hmacSecret=${VERIFY_HMAC_SECRET:12345678901234567890123456789012}
# HMAC密钥需要更改为更高熵，目前HMAC与JWT密钥仅服务于测试环境，生产环境务必通过环境变量配置更高熵密钥

# --- JWT ---
# 生产环境务必通过环境变量配置 JWT_SECRET，且长度需足够（HS512 建议 >= 64 字节）
jwt.secret=${JWT_SECRET:123456789012345678901234567890123456789012345678901234567890123456}
jwt.expirationMs=${JWT_EXPIRATION_MS:3600000}